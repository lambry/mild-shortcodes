!function($){Shorts={Run:function(){this.cache(),this.events(),this.init()},cache:function(){this.$wrap=$("#shorts-generate"),this.$section=this.$wrap.find(".shortcode"),this.$links=this.$wrap.find(".shorts-links")},events:function(){this.$wrap.on("click",".shorts-home",this.showLinks),this.$wrap.on("click",".shorts-link",this.showSection),this.$wrap.on("click",".shorts-clone",this.cloneFields),this.$section.on("submit",this.createShortcode)},init:function(){this.initMagnific(),this.initSortable(),this.initDroppable(),this.initSelect(this.$wrap.find(".shorts-select"))},initMagnific:function(){$(".shorts-launch").magnificPopup({closeBtnInside:!0,mainClass:"shorts-popup",items:{src:"#shorts-generate",type:"inline"},callbacks:{beforeOpen:function(){this.wrap.removeAttr("tabindex")},open:function(){Shorts.showLinks()}}})},initSortable:function(){this.$wrap.find(".shorts-sortable").sortable({placeholder:"shorts-gap",start:function(t,s){$(s.item).parents(".shortcode").find(".shorts-remove").addClass("shorts-visible")},stop:function(t,s){$(s.item).parents(".shortcode").find(".shorts-remove").removeClass("shorts-visible")}})},initDroppable:function(){Shorts.$wrap.find(".shorts-remove").droppable({activeClass:"shorts-remove-highlight",hoverClass:"shorts-remove-hover",drop:function(t,s){$(s.draggable).remove(),$(t.target).removeClass("shorts-visible")}})},initSelect:function(t){t.select2({width:"100%",templateResult:function(t){return $(t.element).parent().hasClass("icon")?$('<span><i class="fa fa-'+t.id+'"></i> '+t.text+"</span>"):t.text}})},showLinks:function(){Shorts.$section.removeClass("shorts-visible"),setTimeout(function(){Shorts.$section.hide(),Shorts.$links.fadeIn(100,function(){Shorts.$links.addClass("shorts-visible")})},200)},showSection:function(){Shorts.$links.removeClass("shorts-visible");var t=$(this).data("shortcode");setTimeout(function(){Shorts.$links.hide(),Shorts.$wrap.find("#"+t).fadeIn(100,function(){Shorts.$wrap.find("#"+t).addClass("shorts-visible")})},200)},cloneFields:function(){$this=$(this);var t=$this.parents(".shortcode").find(".shorts-field-wrap"),s=t.find(".shorts-fields:last-child").clone();s.find(".shorts-input").val(""),s.find(".select2").remove(),s.appendTo(t),Shorts.initSelect(t.find(".shorts-select"))},createShortcode:function(t){t.preventDefault(),$this=Shorts.$wrap.find("form.shorts-visible");var s=window.parent.tinyMCE,i=$this.data("code"),e=$this.data("wrap"),o=$this.data("child"),n="";1===e&&o&&(n+="["+i+"]<br>"),n+=o?Shorts.createCodes($this,i,o):Shorts.createAttributes($this,i),1===e&&(n+=" "+s.activeEditor.selection.getContent()+" [/"+i+"]"),s&&(s.execCommand("mceInsertContent",!1,n),$.magnificPopup.close())},createCodes:function(t,s,i){var e="";return t.find(".shorts-fields").each(function(t,s){e+=Shorts.createAttributes($(this),i),e+=" [/"+i+"]<br>"}),e},createAttributes:function(t,s){var i="";return t.find(".shorts-input, .shorts-select, .shorts-checkbox:checked").each(function(t,s){var e=$(s).val();e&&(i+=" "+s.name+'="'+e+'"')}),"["+s+i+"]"}},Shorts.Run()}(jQuery);
//# sourceMappingURL=./admin.min.js.map